package gen

import "text/template"

var nsqTemplate = template.Must(template.New("").Parse(`// Code generated by go generate; DO NOT EDIT.
package nsq

import (
  "context"

  "{{.ApiPkgPath}}"
	"github.com/minus5/svckit/nsq"
)

var (
	topic = "{{.NsqTopic}}"
)

func Client() *api.Client {
	return api.NewClient(nsq.RpcClient(topic))
}

type Closer interface {
	Close()
}

type server interface {
	Serve(ctx context.Context, typ string, req []byte) ([]byte, error)
}

func Server(ctx context.Context, srv server) Closer {
	return nsq.RpcServer(ctx, topic, srv)
}

`))
